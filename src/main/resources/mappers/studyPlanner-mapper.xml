<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="StudyTime">
	<resultMap type="StudyTime" id="StudyTimeResultSet">
		<id property="studyTimeCode" column="STUDYTIME_CODE"></id>
		<result property="studyTimeDate" column="STUDYTIME_DATE"/>
		<result property="studyTimeTimezone" column="STUDYTIME_TIMEZONE"/>
		<result property="studyTimeStudyTime" column="STUDYTIME_STUDYTIME"/>
		<result property="studyTimeDivision" column="STUDYTIME_DIVISION"/>
		<result property="studyGroupCode" column="STUDYGROUP_CODE"/>
		<result property="memberCode" column="MEMBER_CODE"/>
	</resultMap>
	
	<!-- 일간 공부량 차트 -->
	<select id="selectTodayChart" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT * 
		FROM STUDYTIME 
		WHERE MEMBER_CODE = #{loginUserCode}
		AND STUDYTIME_DIVISION = 0
		AND STUDYTIME_DATE = #{chartDate}
	</select>
	
	<!-- 주간 공부량 차트 -->
	<select id="selectWeeklyChart" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT SUM(STUDYTIME_STUDYTIME), STUDYTIME_DATE
        FROM STUDYTIME
        WHERE MEMBER_CODE = #{loginUserCode}
		AND STUDYTIME_DIVISION = 0
		AND STUDYTIME_DATE BETWEEN #{chartDateYear[0]} AND #{chartDateYear[1]}
        GROUP BY STUDYTIME_DATE
        ORDER BY STUDYTIME_DATE
	</select>
	
	<!-- 월간 공부량 차트 -->
	<select id="selectMonthlyChart" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT * 
		FROM STUDYTIME 
		WHERE MEMBER_CODE = #{loginUserCode}
		AND STUDYTIME_DIVISION = 0
		AND STUDYTIME_DATE LIKE #{chartDateYear} || '%'
	</select>
	
	
	
</mapper>